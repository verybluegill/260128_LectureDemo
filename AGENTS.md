# Codex Instructions (Project-wide)

## 🔥 最重要：エンコーディング（UTF-8 固定・Shift-JIS禁止）
- **このプロジェクトの全ファイルは必ず UTF-8（BOMなし）で保存すること。**
- **Shift-JIS / CP932 で保存しないこと（禁止）。**  
  日本語コメントを含むため、CP932保存は文字化け（? や ▯）の原因になる。
- **新規作成・編集したファイルは、保存後に必ず「UTF-8」であることを確認すること。**  
  （VS Code の右下のエンコーディング表示が `UTF-8` になっているか確認）
- 文字化けが疑われる場合は、**“明示的に UTF-8 で再保存（変換）” を必ず実施すること。**

### ✅ 強制：UTF-8への再保存（変換手順）
- **PowerShell（推奨：UTF-8で上書き保存）**
  ```powershell
  Get-Content .\FILE | Set-Content -Encoding utf8 .\FILE
  ```
- **R（CP932→UTF-8変換の例。必要なら "SJIS" も試す）**
  ```r
  x <- readLines("FILE", encoding = "CP932")
  writeLines(x, "FILE", useBytes = TRUE)  # UTF-8で書き出し（BOMなし）
  ```

### （任意だが推奨）Rスクリプト先頭の宣言
- `.R` ファイルの先頭に次を入れる（目視確認用。実際の保存形式はUTF-8が必須）：
  ```r
  # -*- coding: utf-8 -*-
  # (saved as UTF-8, no BOM)
  ```

---

## コードスタイル
- 簡潔で読みやすいコードを優先する。
- ロジックや意図が伝わるよう、日本語でコメントを書く。
- 不明点や仮定がある場合は、検証用の小さなコードを添える。
- 変更は最小限にする。

## プロット
- 図内のテキスト（axis label, legend, title など）は **英語** で書く。

## 出力形式（Codexの回答方針）
- 何をどこに変更したかを、(1)対象ファイル (2)変更箇所 (3)変更コード（前後文脈付き）で示す。
- 可能なら「変更点だけのコード断片」＋「完成版」の両方を出す。

## 回答テンプレ（設定画面に貼る場合の例）
- **保存形式は UTF-8（BOMなし）固定。Shift-JIS/CP932は禁止。**
- 文字化けが疑われる場合は **UTF-8で再保存（変換）** を必ず実行すること。
- コードは読みやすくシンプルにすること。
- コメントは日本語で書くこと。
- 不明点や仮定がある場合は、検証コードを追加して確認すること。
- 図の軸ラベル・凡例などプロット内テキストは英語で書くこと。
